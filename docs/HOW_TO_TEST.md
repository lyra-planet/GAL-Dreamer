# å¦‚ä½•æµ‹è¯• Story Intake Agent

## ğŸ“‹ å‰ç½®æ¡ä»¶

ç¡®ä¿ä½ å·²ç»:
1. å¤åˆ¶äº† `.env.example` ä¸º `.env`
2. åœ¨ `.env` ä¸­å¡«å†™äº† `LLM_API_KEY`

## ğŸ§ª æµ‹è¯•æ­¥éª¤

### æ–¹æ³•1: è¿è¡Œå®Œæ•´æµ‹è¯•è„šæœ¬

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ
python tests/test_story_intake.py
```

è¿™ä¸ªè„šæœ¬ä¼š:
- åˆ›å»º Story Intake Agent
- è¿è¡Œ2ä¸ªæµ‹è¯•ç”¨ä¾‹(æ ¡å›­æ‹çˆ±æ•…äº‹ + å¥‡å¹»å†’é™©æ•…äº‹)
- æ˜¾ç¤ºæå–çš„çº¦æŸæ¡ä»¶
- è¾“å‡ºæµ‹è¯•æ€»ç»“

### æ–¹æ³•2: æ‰‹åŠ¨æµ‹è¯•(æ¨èå…ˆè¯•è¿™ä¸ª)

åˆ›å»ºä¸€ä¸ªæµ‹è¯•æ–‡ä»¶ `test_manual.py`:

```python
from agents.story_intake_agent import StoryIntakeAgent

# åˆ›å»ºAgent
agent = StoryIntakeAgent()

# ä½ çš„æ•…äº‹åˆ›æ„
user_idea = """
ä¸€ä¸ªç°ä»£æ ¡å›­èƒŒæ™¯çš„æ•…äº‹ã€‚
ä¸»è§’æ˜¯ä¸€ä¸ªæ™®é€šé«˜ä¸­ç”Ÿ,çªç„¶ç­é‡Œæ¥äº†ä¸€ä¸ªè½¬æ ¡ç”Ÿã€‚
è¿™ä¸ªè½¬æ ¡ç”Ÿä¼¼ä¹éšç’äº†ä»€ä¹ˆç§˜å¯†ã€‚
éšç€æ•…äº‹å‘å±•,ä¸»è§’å‘ç°è½¬æ ¡ç”Ÿå®é™…ä¸Šæ˜¯åœ¨èº²é¿ä»€ä¹ˆã€‚
æ•…äº‹è¦æœ‰å¤šæ¡æ”»ç•¥çº¿,æ¯æ¡çº¿æœ‰ä¸åŒçš„ç»“å±€ã€‚
"""

# å¤„ç†
constraints = agent.process(user_idea)

# æŸ¥çœ‹ç»“æœ
print(f"é¢˜æ: {constraints.genre}")
print(f"ä¸»é¢˜: {constraints.themes}")
print(f"åŸºè°ƒ: {constraints.tone}")
print(f"å¿…å¤‡å…ƒç´ : {constraints.must_have}")
print(f"ç¦æ­¢å…ƒç´ : {constraints.forbidden}")
```

è¿è¡Œ:
```bash
python test_manual.py
```

### æ–¹æ³•3: åœ¨Pythonäº¤äº’ç¯å¢ƒæµ‹è¯•

```bash
python
```

ç„¶å:
```python
from agents.story_intake_agent import StoryIntakeAgent

agent = StoryIntakeAgent()
result = agent.process("ä¸€ä¸ªæ ¡å›­æ‹çˆ±æ•…äº‹")
print(result)
```

## ğŸ“Š é¢„æœŸè¾“å‡º

æˆåŠŸçš„æµ‹è¯•åº”è¯¥çœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„è¾“å‡º:

```
============================================================
ğŸ§ª æµ‹è¯• Story Intake Agent
============================================================

============================================================
æµ‹è¯•ç”¨ä¾‹ 1: æ ¡å›­æ‹çˆ±æ•…äº‹
============================================================

è¾“å…¥åˆ›æ„:
[ä½ çš„åˆ›æ„æ–‡æœ¬]

âœ… æµ‹è¯•é€šè¿‡!

æå–ç»“æœ:
  é¢˜æ(genre): æ‹çˆ±
  ä¸»é¢˜(themes): é’æ˜¥, æˆé•¿, é€‰æ‹©
  åŸºè°ƒ(tone): æ¸©é¦¨, ç•¥å¸¦æ„Ÿä¼¤
  å¿…å¤‡å…ƒç´ (must_have): å¤šå¥³ä¸», å¤šç»“å±€, æ ¡å›­ç”Ÿæ´»
  ç¦æ­¢å…ƒç´ (forbidden): æ— 
```

## âš ï¸ å¯èƒ½é‡åˆ°çš„é—®é¢˜

### 1. ModuleNotFoundError
**é—®é¢˜**: æ‰¾ä¸åˆ°æ¨¡å—
**è§£å†³**: ç¡®ä¿åœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œ

### 2. API Keyé”™è¯¯
**é—®é¢˜**: LLM_API_KEYæœªè®¾ç½®
**è§£å†³**: æ£€æŸ¥ `.env` æ–‡ä»¶ä¸­çš„ `LLM_API_KEY`

### 3. JSONè§£æå¤±è´¥
**é—®é¢˜**: LLMè¿”å›çš„ä¸æ˜¯æœ‰æ•ˆJSON
**è§£å†³**: è¿™æ˜¯æ­£å¸¸çš„,Agentä¼šå°è¯•æå–JSONéƒ¨åˆ†ã€‚å¦‚æœæŒç»­å¤±è´¥,å¯èƒ½éœ€è¦è°ƒæ•´Prompt

## ğŸ¯ éªŒè¯æ ‡å‡†

Story Intake Agentå·¥ä½œæ­£å¸¸çš„æ ‡å‡†:
- âœ… èƒ½æå–å‡ºgenre(é¢˜æ)
- âœ… èƒ½æå–å‡º2-5ä¸ªthemes(ä¸»é¢˜)
- âœ… èƒ½å®šä¹‰tone(åŸºè°ƒ)
- âœ… èƒ½è¯†åˆ«must_have(å¿…å¤‡å…ƒç´ )
- âœ… èƒ½è¯†åˆ«forbidden(ç¦æ­¢å…ƒç´ ,å¦‚æœæœ‰)
- âœ… è¿”å›çš„æ˜¯æœ‰æ•ˆçš„StoryConstraintså¯¹è±¡

## ğŸ“ ä¸‹ä¸€æ­¥

æµ‹è¯•é€šè¿‡å,æˆ‘ä»¬å°±å¯ä»¥å®ç°:
- Worldbuilding Agent
- Cast Design Agent

å‡†å¤‡å¥½äº†å°±å‘Šè¯‰æˆ‘! ğŸš€
